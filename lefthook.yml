pre-commit:
  commands:
    fmt:
      run: goimports -w .
      glob: "*.go"
      stage_fixed: true
    vet:
      run: go vet ./...
      glob: "*.go"
    test:
      run: go test ./...
      glob: "*.go"
    mod-tidy:
      run: go mod tidy
      glob: "*.go"
      stage_fixed: true

post-commit:
  commands:
    review:
      run: git log -p -1 HEAD | claude 'Review this commit. Think hard.'
    lint:
      run: golangci-lint run --fix -D errcheck -D staticcheck
      glob: "*.go"

pre-push:
  commands:
    test:
      run: go test ./...
      glob: "*.go"
    build:
      run: go build -o wt
      glob: "*.go"

